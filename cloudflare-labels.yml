# Configuration Cloudflare optimis√©e
# Ajoutez ces labels dans votre docker-compose.yml

services:
  frontend:
    labels:
      # Cloudflare compatibility
      - "traefik.http.middlewares.cloudflare-headers.headers.customRequestHeaders.CF-Connecting-IP="
      - "traefik.http.middlewares.cloudflare-headers.headers.customRequestHeaders.CF-Ray="
      - "traefik.http.middlewares.cloudflare-headers.headers.customRequestHeaders.CF-Visitor="
      
      # SSL configuration
      - "traefik.http.routers.frontend.middlewares=cloudflare-headers"
      - "traefik.http.routers.frontend.tls=true"
      - "traefik.http.routers.frontend.tls.certresolver=letsencrypt"

  backend:
    labels:
      # Same for backend
      - "traefik.http.routers.backend.middlewares=cloudflare-headers"
      - "traefik.http.routers.backend.tls=true" 
      - "traefik.http.routers.backend.tls.certresolver=letsencrypt"